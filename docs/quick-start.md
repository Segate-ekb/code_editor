# Быстрый старт

Это руководство поможет вам подключить редактор кода к форме 1С за несколько минут.

## Предварительные требования

- Платформа 1С:Предприятие 8.3.14+
- Добавленные в конфигурацию объекты консоли (общие модули, макеты, перечисления)

## Шаг 1: Подготовка формы

### Создание элемента ПолеHTML

1. Откройте форму в конфигураторе
2. Добавьте элемент типа **ПолеHTML**
3. Установите имя элемента: `HTML` (или другое, если укажете при инициализации)
4. Растяните элемент на нужную область формы

### Настройка события

В свойствах элемента HTML найдите событие **ДокументСформирован** и создайте обработчик `HTMLДокументСформирован`.

## Шаг 2: Код инициализации

### ПриСозданииНаСервере

```bsl
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
    
    // Инициализация редактора - создаёт служебные реквизиты и загружает макет
    конс_ПодключаемаяКонсольСервер.ИнициализироватьРедактор(ЭтотОбъект, УникальныйИдентификатор);
    
КонецПроцедуры
```

### ПриОткрытии

```bsl
&НаКлиенте
Процедура ПриОткрытии(Отказ)
    
    // Подключение редактора к полю HTML
    конс_ПодключаемаяКонсольКлиент.ПодключитьРедактор(ЭтаФорма);
    
КонецПроцедуры
```

### HTMLДокументСформирован

```bsl
&НаКлиенте
Процедура HTMLДокументСформирован(Элемент)
    
    // Завершение инициализации редактора
    конс_ПодключаемаяКонсольКлиент.ОбработчикДокументСформирован(ЭтаФорма);
    
КонецПроцедуры
```

## Шаг 3: Обработка событий (опционально)

Для полноценной работы редактора добавьте обработчик нажатий:

```bsl
&НаКлиенте
Процедура HTMLПриНажатии(Элемент, ДанныеСобытия, СтандартнаяОбработка)
    
    конс_ПодключаемаяКонсольКлиент.ОбработчикПриНажатии(ЭтаФорма, ДанныеСобытия);
    
КонецПроцедуры
```

## Готово!

После выполнения этих шагов редактор будет работать с базовой функциональностью:

- ✅ Подсветка синтаксиса BSL
- ✅ Автодополнение методов платформы
- ✅ Поиск и замена (Ctrl+F, Ctrl+H)
- ✅ Сворачивание кода
- ✅ Карта кода (minimap)

## Работа с текстом

### Получение текста

```bsl
// Получить весь текст из редактора
Текст = конс_ПодключаемаяКонсольКлиент.ПолучитьТекст(ЭтаФорма);

// Получить только выделенный текст
Выделенный = конс_ПодключаемаяКонсольКлиент.ПолучитьВыделенныйТекст(ЭтаФорма);
```

### Установка текста

```bsl
// Заменить весь текст
конс_ПодключаемаяКонсольКлиент.УстановитьТекст(ЭтаФорма, "Сообщить(""Привет мир!"");");

// Вставить текст в текущую позицию курсора
конс_ПодключаемаяКонсольКлиент.ВставитьТекст(ЭтаФорма, "// Комментарий");

// Очистить редактор
конс_ПодключаемаяКонсольКлиент.ОчиститьТекст(ЭтаФорма);
```

## Выполнение кода

### Простое выполнение

```bsl
&НаКлиенте
Процедура ВыполнитьКод(Команда)
    
    // Выполняет код из редактора на сервере
    конс_ПодключаемаяКонсольКлиент.ВыполнитьКод(ЭтаФорма);
    
КонецПроцедуры
```

### Выполнение с обработкой результата

```bsl
&НаКлиенте
Процедура ВыполнитьКодСРезультатом(Команда)
    
    // 1. Подготовить код (добавляет сбор переменных)
    Код = конс_ПодключаемаяКонсольКлиент.ПодготовитьКодСПеременными(ЭтаФорма);
    
    Если Не ЗначениеЗаполнено(Код) Тогда
        ПоказатьПредупреждение(, "Нет кода для выполнения!");
        Возврат;
    КонецЕсли;
    
    // 2. Выполнить на сервере
    Результат = конс_ПодключаемаяКонсольВызовСервера.ВыполнитьКодНаСервере(Код, 
        ПредопределенноеЗначение("Перечисление.конс_РежимПоказаПеременных.ВТабло"));
    
    // 3. Обработать результат (показать ошибку или переменные)
    конс_ПодключаемаяКонсольКлиент.ОбработатьРезультат(ЭтаФорма, Результат);
    
КонецПроцедуры
```

## Нестандартное имя поля HTML

Если элемент HTML называется не `HTML`, укажите имя при инициализации:

```bsl
// На сервере
Параметры = Новый Структура("ИмяПоляHTML", "МоёПолеРедактора");
конс_ПодключаемаяКонсольСервер.ИнициализироватьРедактор(ЭтотОбъект, УникальныйИдентификатор, Параметры);

// На клиенте - имя берётся автоматически из формы
конс_ПодключаемаяКонсольКлиент.ПодключитьРедактор(ЭтаФорма);
```

## Переопределение настроек

Можно переопределить настройки редактора при инициализации:

```bsl
Параметры = Новый Структура;
Параметры.Вставить("ПереопределитьНастройки", Новый Структура);
Параметры.ПереопределитьНастройки.Вставить("КартаКода", Ложь);          // Отключить миникарту
Параметры.ПереопределитьНастройки.Вставить("БыстрыеПодсказки", Истина); // Включить подсказки

конс_ПодключаемаяКонсольСервер.ИнициализироватьРедактор(ЭтотОбъект, УникальныйИдентификатор, Параметры);
```

## Следующие шаги

- [Добавление пользовательских переменных](variables.md)
- [Добавление функций](functions.md)
- [Создание сниппетов](snippets.md)
- [Настройки редактора](settings.md)

## Пример демо-обработки

Полный рабочий пример находится в обработке `конс_ДемоКонсоль` в составе проекта. Она демонстрирует:

- Базовое подключение редактора
- Добавление переменных
- Добавление функций
- Добавление сниппетов
- Выполнение кода
- Внешнее выполнение кода
