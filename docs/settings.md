# Настройки редактора

Редактор имеет множество настроек, которые сохраняются в хранилище общих настроек для каждого пользователя.

## Доступные настройки

| Настройка | Тип | По умолчанию | Описание |
|-----------|-----|--------------|----------|
| `Тема` | Строка | `СветлаяТема` | Цветовая тема оформления |
| `БыстрыеПодсказки` | Булево | `Истина` | Автопоказ автодополнения при вводе |
| `КартаКода` | Булево | `Истина` | Отображение minimap справа |
| `ПробелыИТабуляции` | Булево | `Ложь` | Визуализация пробелов и табуляций |
| `СтрокаСостояния` | Булево | `Истина` | Строка состояния внизу редактора |
| `ПутьКИсходникамКонфигурации` | Строка | `""` | Путь к выгруженной конфигурации |
| `ПутьКШаблонамКода` | Строка | `""` | Путь к файлу шаблонов (.st) |
| `ПоказыватьПеременные` | ПеречислениеСсылка | `ВТабло` | Режим показа переменных |
| `СохранятьКодПриВыполнении` | Булево | `Ложь` | Сохранять код при выполнении |
| `ЯзыкПодсказок` | Строка | `ru` | Язык подсказок (ru/en) |

### Режимы показа переменных

Используется перечисление `конс_РежимПоказаПеременных`:

| Значение | Описание |
|----------|----------|
| `НеОтображать` | Не показывать переменные |
| `ВТабло` | Показывать в табло |
| `ВПодсказках` | Показывать в подсказках при наведении |

## Программное управление настройками

### Переопределение при инициализации

```bsl
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
    
    Параметры = Новый Структура;
    Параметры.Вставить("ПереопределитьНастройки", Новый Структура);
    
    // Отключаем миникарту
    Параметры.ПереопределитьНастройки.Вставить("КартаКода", Ложь);
    
    // Включаем показ пробелов
    Параметры.ПереопределитьНастройки.Вставить("ПробелыИТабуляции", Истина);
    
    // Устанавливаем тёмную тему
    Параметры.ПереопределитьНастройки.Вставить("Тема", "ТёмнаяТема");
    
    конс_ПодключаемаяКонсольСервер.ИнициализироватьРедактор(ЭтотОбъект, УникальныйИдентификатор, Параметры);
    
КонецПроцедуры
```

### Применение настроек на клиенте

```bsl
&НаКлиенте
Процедура ПрименитьМоиНастройки()
    
    Настройки = Новый Структура;
    Настройки.Вставить("Тема", "ТёмнаяТема");
    Настройки.Вставить("БыстрыеПодсказки", Истина);
    Настройки.Вставить("КартаКода", Ложь);
    
    конс_ПодключаемаяКонсольКлиент.ПрименитьНастройки(ЭтаФорма, Настройки);
    
КонецПроцедуры
```

## Темы оформления

### Доступные темы

| Идентификатор | Описание |
|---------------|----------|
| `СветлаяТема` | Светлая тема (по умолчанию) |
| `ТёмнаяТема` | Тёмная тема |
| `ВысокийКонтраст` | Высококонтрастная тема |

### Программная установка темы

```bsl
// Через метод УстановитьТему
конс_ПодключаемаяКонсольКлиент.УстановитьТему(ЭтаФорма, "ТёмнаяТема");

// Через ПрименитьНастройки
Настройки = Новый Структура("Тема", "СветлаяТема");
конс_ПодключаемаяКонсольКлиент.ПрименитьНастройки(ЭтаФорма, Настройки);
```

## Карта кода (Minimap)

Миникарта показывает уменьшенное представление всего документа справа.

### Управление

```bsl
// Включить
Настройки = Новый Структура("КартаКода", Истина);
конс_ПодключаемаяКонсольКлиент.ПрименитьНастройки(ЭтаФорма, Настройки);

// Отключить
Настройки = Новый Структура("КартаКода", Ложь);
конс_ПодключаемаяКонсольКлиент.ПрименитьНастройки(ЭтаФорма, Настройки);
```

### Применение при инициализации

```bsl
Параметры = Новый Структура;
Параметры.Вставить("ПереопределитьНастройки", Новый Структура("КартаКода", Ложь));
конс_ПодключаемаяКонсольСервер.ИнициализироватьРедактор(ЭтотОбъект, УникальныйИдентификатор, Параметры);
```

## Строка состояния

Строка состояния отображает:
- Номер строки и колонки курсора
- Режим вставки/замены
- Кодировку
- Язык редактора

```bsl
// Показать строку состояния
Настройки = Новый Структура("СтрокаСостояния", Истина);
конс_ПодключаемаяКонсольКлиент.ПрименитьНастройки(ЭтаФорма, Настройки);

// Скрыть строку состояния
Настройки = Новый Структура("СтрокаСостояния", Ложь);
конс_ПодключаемаяКонсольКлиент.ПрименитьНастройки(ЭтаФорма, Настройки);
```

## Автодополнение

### Быстрые подсказки

Управляет автоматическим появлением списка автодополнения при вводе:

```bsl
// Включить быстрые подсказки
Настройки = Новый Структура("БыстрыеПодсказки", Истина);
конс_ПодключаемаяКонсольКлиент.ПрименитьНастройки(ЭтаФорма, Настройки);

// Отключить (автодополнение только по Ctrl+Space)
Настройки = Новый Структура("БыстрыеПодсказки", Ложь);
конс_ПодключаемаяКонсольКлиент.ПрименитьНастройки(ЭтаФорма, Настройки);
```

## Отображение пробелов

Визуализация невидимых символов (пробелы, табуляции):

```bsl
// Показать пробелы и табуляции
Настройки = Новый Структура("ПробелыИТабуляции", Истина);
конс_ПодключаемаяКонсольКлиент.ПрименитьНастройки(ЭтаФорма, Настройки);

// Скрыть
Настройки = Новый Структура("ПробелыИТабуляции", Ложь);
конс_ПодключаемаяКонсольКлиент.ПрименитьНастройки(ЭтаФорма, Настройки);
```

## Режим только чтение

```bsl
// Включить режим только чтение
конс_ПодключаемаяКонсольКлиент.УстановитьРежимТолькоЧтение(ЭтаФорма, Истина);

// Выключить
конс_ПодключаемаяКонсольКлиент.УстановитьРежимТолькоЧтение(ЭтаФорма, Ложь);
```

## Режим языка

```bsl
// BSL (язык 1С) - по умолчанию
конс_ПодключаемаяКонсольКлиент.УстановитьРежимЯзыка(ЭтаФорма, "bsl");

// Язык запросов 1С
конс_ПодключаемаяКонсольКлиент.УстановитьРежимЯзыка(ЭтаФорма, "bsl_query");

// JSON
конс_ПодключаемаяКонсольКлиент.УстановитьРежимЯзыка(ЭтаФорма, "json");

// XML
конс_ПодключаемаяКонсольКлиент.УстановитьРежимЯзыка(ЭтаФорма, "xml");

// YAML
конс_ПодключаемаяКонсольКлиент.УстановитьРежимЯзыка(ЭтаФорма, "yaml");
```

## Язык подсказок

Переключение языка подсказок между русским и английским:

```bsl
// В настройках
Настройки = Новый Структура("ЯзыкПодсказок", "en"); // или "ru"
конс_ПодключаемаяКонсольКлиент.ПрименитьНастройки(ЭтаФорма, Настройки);
```

## Работа с хранилищем настроек

### Получение настроек

```bsl
&НаСервере
Функция ПолучитьТекущиеНастройки()
    Возврат конс_ПодключаемаяКонсольСервер.ПолучитьНастройкиИзХранилища();
КонецФункции
```

### Сохранение настроек

```bsl
&НаСервере
Процедура СохранитьНастройки(Настройки)
    конс_ПодключаемаяКонсольСервер.СохранитьНастройкиВХранилище(Настройки);
КонецПроцедуры
```

### Настройки по умолчанию

```bsl
&НаСервере
Функция ПолучитьНастройкиПоУмолчанию()
    Возврат конс_ПодключаемаяКонсольСервер.НастройкиПоУмолчанию();
КонецФункции
```

## Форма настроек

Редактор предоставляет встроенную форму настроек:

```bsl
&НаКлиенте
Процедура ОткрытьНастройки(Команда)
    конс_ПодключаемаяКонсольКлиент.ОткрытьНастройкиРедактора();
КонецПроцедуры
```

После изменения настроек в форме они автоматически сохраняются в хранилище.

## Загрузка шаблонов из файла

Можно загрузить сниппеты из файла шаблонов 1С (.st):

```bsl
// В настройках
Настройки = Новый Структура("ПутьКШаблонамКода", "C:\Шаблоны\МоиШаблоны.st");
конс_ПодключаемаяКонсольКлиент.ПрименитьНастройки(ЭтаФорма, Настройки);
```

## Загрузка метаданных из исходников

Для улучшения автодополнения можно загрузить методы из выгруженной конфигурации:

```bsl
// В настройках
Настройки = Новый Структура("ПутьКИсходникамКонфигурации", "C:\MyProject\src\cf\");
конс_ПодключаемаяКонсольКлиент.ПрименитьНастройки(ЭтаФорма, Настройки);
```

После этого при вводе `ОбщегоНазначения.` будут показаны реальные экспортные методы модуля.

## Полный пример

```bsl
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
    
    // Переопределяем некоторые настройки
    Параметры = Новый Структура;
    Параметры.Вставить("ПереопределитьНастройки", Новый Структура);
    Параметры.ПереопределитьНастройки.Вставить("КартаКода", Ложь);
    Параметры.ПереопределитьНастройки.Вставить("ПоказыватьПеременные", 
        Перечисления.конс_РежимПоказаПеременных.ВТабло);
    
    конс_ПодключаемаяКонсольСервер.ИнициализироватьРедактор(ЭтотОбъект, УникальныйИдентификатор, Параметры);
    
КонецПроцедуры

&НаКлиенте
Процедура HTMLДокументСформирован(Элемент)
    
    конс_ПодключаемаяКонсольКлиент.ОбработчикДокументСформирован(ЭтаФорма);
    
    // Дополнительные настройки после инициализации
    ПрименитьДополнительныеНастройки();
    
КонецПроцедуры

&НаКлиенте
Процедура ПрименитьДополнительныеНастройки()
    
    Настройки = Новый Структура;
    Настройки.Вставить("Тема", "ТёмнаяТема");
    Настройки.Вставить("ПробелыИТабуляции", Истина);
    
    конс_ПодключаемаяКонсольКлиент.ПрименитьНастройки(ЭтаФорма, Настройки);
    
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьНастройки(Команда)
    конс_ПодключаемаяКонсольКлиент.ОткрытьНастройкиРедактора();
КонецПроцедуры
```

## См. также

- [Быстрый старт](quick-start.md)
- [Возможности](features.md)
- [API Reference](api-reference.md)
